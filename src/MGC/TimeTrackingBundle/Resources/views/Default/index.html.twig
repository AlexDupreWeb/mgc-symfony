{% extends 'base.html.twig' %}

{% block body %}
    <div class="content-wrapper">
        <section class="content-header">
            <h1>
                Time Tracking
                <small>Gestionnaire de temps</small>
            </h1>
            <ol class="breadcrumb">
                <li><a href="#"><i class="fa fa-dashboard"></i> Level</a></li>
                <li class="active">Here</li>
            </ol>
        </section>

        <section class="content">

            <div class="row">
                <div class="col-md-3 col-sm-6 col-xs-12">
                    <div class="info-box">
                        <span class="info-box-icon bg-black"><i class="fa fa-folder"></i></span>

                        <div class="info-box-content">
                            <span class="info-box-text">Projets</span>
                            <span class="info-box-number">{{ nbProjects }}</span>

                            <hr class="info-box-separator">
                            <span class="progress-description">
                                <a href="{{ url('time-tracking-calendar') }}">Voir tous les projets</a>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6 col-xs-12">
                    <div class="info-box">
                        <span class="info-box-icon bg-black"><i class="fa fa-tags"></i></span>

                        <div class="info-box-content">
                            <span class="info-box-text">Labels</span>
                            <span class="info-box-number">{{ nbTags }}</span>

                            <hr class="info-box-separator">
                            <span class="progress-description">
                                <a href="{{ url('time-tracking-calendar') }}">Voir tous les labels</a>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6 col-xs-12">
                    <div class="info-box">
                        <span class="info-box-icon bg-black"><i class="fa fa-tasks"></i></span>

                        <div class="info-box-content">
                            <span class="info-box-text">Taches</span>
                            <span class="info-box-number">{{ nbTasks }}</span>

                            <hr class="info-box-separator">
                            <span class="progress-description">
                                <a href="{{ url('time-tracking-tasks') }}">Voir toutes les taches</a>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6 col-xs-12">
                    <div class="info-box">
                        <span class="info-box-icon bg-black"><i class="fa fa-calendar"></i></span>

                        <div class="info-box-content">
                            <span class="info-box-text">Calendrier</span>
                            <span class="info-box-number">{{ "now"|date("d/m/Y") }}</span>

                            <div class="progress">
                                <div class="progress-bar"></div>
                            </div>
                            <span class="progress-description">
                                <a href="{{ url('time-tracking-calendar') }}">Voir le calendrier</a>
                            </span>

                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4">

                    {% if projects|length > 0 %}
                        <div class="list-group">
                            {% for project in projects %}
                                <a href="#" class="list-group-item">
                                    <span class="badge" style="background-color: {{ project.getColor() }}">&nbsp;</span>
                                    {{ project.getName() }}
                                </a>
                            {% endfor %}
                        </div>

                    {% else %}
                        <div class="alert alert-info">
                            Aucun projet à afficher
                        </div>
                    {% endif %}

                </div>
                <div class="col-md-4">
                    {% if daily_report|length > 0 %}
                        <ul class="list-group">
                            {% for report in daily_report %}
                                <li class="list-group-item">
                                    <span class="badge bg-{{ report.color }}">{{ report.executionTime }}</span>
                                    <span class="label label-default">{{ report.date|date('d/m/Y') }}</span>
                                </li>
                            {% endfor %}
                        </ul>

                    {% else %}
                        <div class="alert alert-info">
                            Aucune donnée
                        </div>
                    {% endif %}
                </div>
                <div class="col-md-4">

                    {% if tasks|length > 0 %}
                        <div class="list-group">
                            {% for task in tasks %}
                                <a href="#" class="list-group-item">
                                    <span class="badge bg-black">{{ task.getExecutionTime() }}</span>
                                    <span class="label label-default">{{ task.getDate()|date('d/m/Y') }}</span>
                                    {{ task.getName() }}
                                </a>
                            {% endfor %}
                        </div>

                    {% else %}
                        <div class="alert alert-info">
                            Aucune tache à afficher
                        </div>
                    {% endif %}

                </div>
            </div>

        </section>
    </div>
{% endblock %}
